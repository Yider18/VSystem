{% extends "index.html" %} 
{% block content %}
<style>
    .modal {
        display: none; /* Por defecto, los modales están ocultos */
        width: 100%;
        height: 100%;
    }
    input[type="text"], input[type="date"], input[type="email"], input[type="number"] {
        padding: 6px;
        border-radius: 20px;
        border: 1px solid #ccc;
        font-size: 20px;
    }
    .formulario {
        color: white;
        font-size: 23px;
        background-color: #444;
        padding: 6px;
        margin-bottom: 1px;
        border-radius: 9px;
        border: 1px solid black;
        font-size: 16px;
        margin-left: 200px;
        position: relative;
        top: 20px;
    }
    .boton-guardar {
        padding: 7px;
        background-color: #4caf50;
        color: white;
        border: none;
        border-radius: 9px;
        font-size: 16px;
    }
    .boton-guardar:hover {
        background-color: #b4870a;
    }
    .modal-content {
        background-color: pink;
        margin: 20%;
        padding: 20px;
        border: 10px solid black;
        width: 50%;
    }
    .close {
        color: black;
        font-size: 40px;
        cursor: pointer; /* Cambia el cursor para indicar que es clickable */
    }
</style>

<h1>
    <button id="openPersonaFormBtn" class="formulario">Agregar persona</button>
</h1>
<div id="personaModal" class="modal">
    <div class="modal-content">
        <span class="close" id="closePersonaModal">&times;</span>
        <h2>Formulario</h2>
        <form id="estudianteForm" method="POST" action="{% url 'formulario' %}">
            {% csrf_token %}
            <label for="nombre">Nombre:</label>
            <input type="text" id="nombre" name="nombre" required><br><br>

            <label for="apellidos">Apellidos:</label>
            <input type="text" id="apellidos" name="apellidos" required><br><br>

            <label for="dni">DNI:</label>
            <input type="text" id="dni" name="dni" required><br><br>

            <label for="telefono">Teléfono:</label>
            <input type="text" id="telefono" name="telefono" required><br><br>

            <label for="email">Email:</label>
            <input type="email" id="email" name="email" required><br><br>

            <label for="fecha_nacimiento">Fecha de Nacimiento:</label>
            <input type="date" id="fecha_nacimiento" name="fecha_nacimiento" required><br><br>

            <label for="rol">Rol:</label>
            <input type="text" id="rol" name="rol" required><br><br>

            <button type="submit" class="boton-guardar">Guardar</button>
        </form>
    </div>
</div>

<h1>
    <button id="openMatriculaFormBtn" class="formulario">Agregar Matricula</button>
</h1>
<div id="matriculaModal" class="modal">
    <div class="modal-content">
        <span class="close" id="closeMatriculaModal">&times;</span>
        <h2>Formulario de Matricula</h2>
        <form id="matriculaForm" method="POST" action="{% url 'formulario' %}">
            {% csrf_token %}
            <label for="estudiante_curso">Estudiante-Curso:</label>
            <select id="estudiante_curso" name="estudiante_curso" required>
              {% for ec in estudiantes_cursos %}
                    <option value="{{ ec.Estudiante_id.nombre }}">{{ ec }}</option>
                {% endfor %}
            </select><br><br>

            <label for="fecha_inicio">Fecha de Inicio:</label>
            <input type="date" id="fecha_inicio" name="fecha_inicio" required><br><br>

            <label for="estado">Estado:</label>
            <input type="text" id="estado" name="estado" required><br><br>

            <label for="costo">Costo:</label>
            <input type="number" step="0.01" id="costo" name="costo" required><br><br>

            <button type="submit" class="boton-guardar">Guardar</button>
        </form>
    </div>
</div>

<script>
    // Funciones para abrir y cerrar los modales
    function openModal(modalId) {
        document.getElementById(modalId).style.display = "block";
    }

    function closeModal(modalId) {
        document.getElementById(modalId).style.display = "none";
    }

    // Event listeners para abrir los modales
    document.getElementById("openPersonaFormBtn").onclick = function () {
        openModal('personaModal');
    };
    document.getElementById("openMatriculaFormBtn").onclick = function () {
        openModal('matriculaModal');
    };

    // Event listeners para cerrar los modales
    document.getElementById("closePersonaModal").onclick = function () {
        closeModal('personaModal');
    };
    document.getElementById("closeMatriculaModal").onclick = function () {
        closeModal('matriculaModal');
    };

    // Cerrar los modales si se hace clic fuera de ellos
    window.onclick = function(event) {
        if (event.target.className === "modal") {
            closeModal('personaModal');
            closeModal('matriculaModal');
        }
    };
</script>
{% endblock %}
